package com.zs.jt808.server.entity;

import com.zs.jt808.server.annotation.Jt808Field;
import com.zs.jt808.server.annotation.Jt808Resolver;
import com.zs.jt808.server.netty.request.Jt808Message;
import lombok.Data;

import java.util.Date;

/**
 * 终端主动上发文本消息，平台收到后须回复平台通用应答
 **/
@Data
@Jt808Resolver
public class TextReport extends Jt808Message {

    //Text message encoding method: 0x00 ASCII encoding;  0x01 UNICODE encoding method
    @Jt808Field(index = 0, length = 1)
    private int encodingMethod;
    @Jt808Field(index = 1, length = -1)
    private String textContent; //todo 这个文本消息有什么格式吗？比如示例数据如何解读

    public TextReport(Jt808Message message) {
        this.header = message.getHeader();
        this.checkSum = message.getCheckSum();
        this.msgBodyBytes = message.getMsgBodyBytes();
    }
    /**
     * 6006设备上报文本消息
     * 协议数据：7E600600FD013267937018000A003C42534A2A4E3A31333236373933373031382A543A382E3231372E3130332E36312C373738382A43475245473A312A4353513A32372A4750533A284F4B2C352C30292A413A2C2C2A49434349443A38393836303439373031323137303037333131302A433A33302A4F3A3330302A43533A302A33553A302A335A3A312A483A3330302A32413A312A47503A4F4B2A35433A312A33503A322A4241543A333736352A36303A312A35593A332E352A39453A30303A30302A31483A312A36383A312A43503A313830302C30322C30352C3039302A33443A3030303030302A38583A302A38593A302A385A3A302A32533A302A493A2A423A322A31533A303E3D7E
     * [6006]消息 ID：24582
     * [00FD]协议部分数据长度：253
     * [013267937018]终端手机号
     * [000A]消息流水号：10
     * [00]BG2312 编码方式
     * [3C42534A2A4E3A31333236373933373031382A543A382E3231372E3130332E36312C373738382A43475245473A312A4353513A32372A4750533A284F4B2C352C30292A413A2C2C2A49434349443A38393836303439373031323137303037333131302A433A33302A4F3A3330302A43533A302A33553A302A335A3A312A483A3330302A32413A312A47503A4F4B2A35433A312A33503A322A4241543A333736352A36303A312A35593A332E352A39453A30303A30302A31483A312A36383A312A43503A313830302C30322C30352C3039302A33443A3030303030302A38583A302A38593A302A385A3A302A32533A302A493A2A423A322A31533A303E]
     * 文本消息内容:<BSJ*N:13267937018*T:8.217.103.61,7788*CGREG:1*CSQ:27*GPS:(OK,5,0)*A:,,*ICCID:89860497012170073110*C:30*O:300*CS:0*3U:0*3Z:1*H:300*2A:1*GP:OK*5C:1*3P:2*BAT:3765*60:1*5Y:3.5*9E:00:00*1H:1*68:1*CP:1800,02,05,090*3D:000000*8X:0*8Y:0*8Z:0*2S:0*I:*B:2*1S:0>
     * [3D]校验码正确
     */
}
